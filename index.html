<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nim: Confronto PvP (20 Rodadas)</title>
    <style>
        :root { --neon-blue: #00f2ff; --neon-pink: #ff0055; --bg: #0d0d0d; }
        body { font-family: 'Courier New', Courier, monospace; background: var(--bg); color: white; text-align: center; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; border: 2px solid #333; padding: 20px; border-radius: 15px; background: #000; box-shadow: 0 0 20px rgba(0,242,255,0.1); }
        
        .header { margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 10px; }
        .round-info { font-size: 1.2rem; color: #fff; margin-bottom: 10px; }
        .score-row { display: flex; justify-content: space-around; font-size: 1.1rem; }
        .p1-score { color: var(--neon-blue); }
        .p2-score { color: var(--neon-pink); }
        
        .board { display: flex; justify-content: center; gap: 10px; margin: 40px 0; }
        .cell { width: 50px; height: 50px; border: 1px solid #444; display: flex; align-items: center; justify-content: center; border-radius: 8px; transition: 0.3s; position: relative; }
        
        /* Cores dos Jogadores */
        .cell.p1-active { background: var(--neon-blue); color: black; box-shadow: 0 0 15px var(--neon-blue); transform: scale(1.1); }
        .cell.p2-active { background: var(--neon-pink); color: white; box-shadow: 0 0 15px var(--neon-pink); transform: scale(1.1); }
        
        .diamond-icon { font-size: 1.5rem; }

        #console { background: #111; border-left: 4px solid var(--neon-blue); padding: 15px; text-align: left; min-height: 60px; margin: 20px 0; font-size: 0.9rem; color: #fff; }
        #console.p1-turn { border-color: var(--neon-blue); }
        #console.p2-turn { border-color: var(--neon-pink); }

        .controls { margin-top: 20px; }
        button { padding: 15px 30px; background: transparent; color: white; border: 1px solid #fff; border-radius: 5px; cursor: pointer; font-family: inherit; transition: 0.3s; font-weight: bold; }
        
        /* BotÃµes dinÃ¢micos baseados no turno */
        .turn-p1 button:hover { background: var(--neon-blue); color: black; border-color: var(--neon-blue); }
        .turn-p2 button:hover { background: var(--neon-pink); color: white; border-color: var(--neon-pink); }
        
        button:disabled { opacity: 0.1; cursor: not-allowed; }
        .btn-reset { border-color: #555; font-size: 0.8rem; margin-top: 20px; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <div class="round-info">RODADA: <span id="current-round">1</span> / 20</div>
        <div class="score-row">
            <span class="p1-score">JOGADOR 1: <b id="p1-score-val">0</b></span>
            <span class="p2-score">JOGADOR 2: <b id="p2-score-val">0</b></span>
        </div>
        <div id="turn-display" style="margin-top: 15px; font-weight: bold; letter-spacing: 2px;">VEZ DO JOGADOR 1</div>
    </div>

    <div class="board" id="board"></div>

    <div class="controls turn-p1" id="controls">
        <button id="btn1" onclick="move(1)">AVANÃ‡AR 1</button>
        <button id="btn2" onclick="move(2)">AVANÃ‡AR 2</button>
    </div>

    <div id="console">> Partida iniciada. Jogador 1, escolha seu movimento.</div>
</div>

<script>
    let currentPos = 0;
    const target = 9;
    const totalRounds = 20;
    let round = 1;
    let p1Wins = 0;
    let p2Wins = 0;
    let currentPlayer = 1; // 1 ou 2

    function initBoard() {
        const board = document.getElementById('board');
        board.innerHTML = '';
        for (let i = 1; i <= target; i++) {
            const cell = document.createElement('div');
            cell.className = 'cell';
            cell.id = `cell-${i}`;
            cell.innerHTML = i === target ? '<span class="diamond-icon">ðŸ’Ž</span>' : i;
            board.appendChild(cell);
        }
        updateUI();
    }

    function updateUI() {
        document.getElementById('current-round').innerText = round;
        document.getElementById('p1-score-val').innerText = p1Wins;
        document.getElementById('p2-score-val').innerText = p2Wins;
        
        const turnDisplay = document.getElementById('turn-display');
        const controls = document.getElementById('controls');
        const consoleEl = document.getElementById('console');

        if (currentPlayer === 1) {
            turnDisplay.innerText = "VEZ DO JOGADOR 1";
            turnDisplay.style.color = "var(--neon-blue)";
            controls.className = "controls turn-p1";
            consoleEl.style.borderColor = "var(--neon-blue)";
        } else {
            turnDisplay.innerText = "VEZ DO JOGADOR 2";
            turnDisplay.style.color = "var(--neon-pink)";
            controls.className = "controls turn-p2";
            consoleEl.style.borderColor = "var(--neon-pink)";
        }

        document.getElementById('btn1').disabled = (currentPos + 1 > target);
        document.getElementById('btn2').disabled = (currentPos + 2 > target);
    }

    function move(steps) {
        currentPos += steps;
        render();

        if (currentPos === target) {
            endRound(currentPlayer);
            return;
        }

        // Troca de turno
        currentPlayer = currentPlayer === 1 ? 2 : 1;
        printLog(`Jogador ${currentPlayer === 1 ? 2 : 1} moveu para a casa ${currentPos}. Agora Ã© a vez do Jogador ${currentPlayer}.`);
        updateUI();
    }

    function render() {
        document.querySelectorAll('.cell').forEach(c => c.classList.remove('p1-active', 'p2-active'));
        const activeCell = document.getElementById(`cell-${currentPos}`);
        if (activeCell) {
            activeCell.classList.add(currentPlayer === 1 ? 'p1-active' : 'p2-active');
        }
    }

    function endRound(winner) {
        if (winner === 1) {
            p1Wins++;
            printLog("JOGADOR 1 CAPTUROU O DIAMANTE!");
        } else {
            p2Wins++;
            printLog("JOGADOR 2 CAPTUROU O DIAMANTE!");
        }

        document.getElementById('btn1').disabled = true;
        document.getElementById('btn2').disabled = true;

        setTimeout(() => {
            round++;
            currentPos = 0;
            currentPlayer = (round % 2 !== 0) ? 1 : 2; // Alterna quem comeÃ§a a cada rodada
            
            if (round <= totalRounds) {
                initBoard();
                printLog(`Rodada ${round}. ComeÃ§a o Jogador ${currentPlayer}.`);
            } else {
                finishTournament();
            }
        }, 2000);
    }

    function printLog(msg) {
        document.getElementById('console').innerHTML = "> " + msg;
    }

    function finishTournament() {
        let finalMsg = p1Wins === p2Wins ? "EMPATE TÃ‰CNICO!" : 
                       p1Wins > p2Wins ? "JOGADOR 1 Ã‰ O CAMPEÃƒO!" : "JOGADOR 2 Ã‰ O CAMPEÃƒO!";
        
        document.getElementById('controls').innerHTML = `
            <h3 style="color:gold">FIM DO TORNEIO</h3>
            <p style="font-size: 1.2rem">${finalMsg}</p>
            <button onclick="location.reload()" class="btn-reset">REINICIAR DUELO</button>
        `;
        printLog(`Placar Final: P1 ${p1Wins} x ${p2Wins} P2.`);
    }

    initBoard();
</script>
</body>
</html>